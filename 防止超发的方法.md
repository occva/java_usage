运营人员在后台配置好优惠券的总数量、适用商品范围、有效期等信息。此时，系统会在优惠券库存表（`coupon_stock`）中记录下优惠券的初始库存数量，假设我们本次发放的优惠券总数量为 1000 条。
当用户在秒杀活动页面领取优惠券时，系统首先会从 Redis 中尝试获取分布式锁，锁的键名为 `seckill_coupon_lock`。如果获取锁成功，系统会在数据库中进行如下操作：
如果获取分布式锁失败，说明已经有其他用户或服务正在领取优惠券，当前用户的领券请求会进入一个队列中等待处理。我们使用 RabbitMQ 作为消息队列，将用户的领券请求封装成消息发送到队列中。后台会有一个消费者程序不断从队列中取出领券请求，按照上述流程依次处理。只有当库存数量大于 0 且优惠券状态为未使用时，才允许用户使用该优惠券，并在数据库中更新优惠券的库存数量和使用状态